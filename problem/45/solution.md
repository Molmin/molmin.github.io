有结论：对于一个正整数 $k$，$k$ 人胜者组的数量至多为 $1$。

**【证明】**

反证法。若存在两个 $k$ 人胜者组 $A$ 与 $B$ 且 $A\not=B$，则存在 $u,\ v$ 使得 $u\in A$，$u\not\in B$，$v\not\in A$ 且 $v\in B$。

因为 $A$ 是一个合法的胜者组，故 $u$ 胜 $v$。同理 $v$ 胜 $u$，矛盾。

**证毕。**

设 $P_{n,\ k}$ 表示存在 $k$ 人胜者组的概率。

考虑求 $P_{n+1,\ k}$ 的值。

对编号为 $n+1$ 的这个人分类讨论。若他在胜者组，那么他要胜败者组的 $n+1-k$ 个人，概率为 $q^{n+1-k}$；若他在败者组，那么他要败给胜者组的 $k$ 个人，概率为 $p^k$。故

$$
P_{n+1,\ k}=P_{n,\ k-1}\cdot q^{n+1-k}+P_{n,\ k}\cdot p^k.
$$

同理对编号为 $1$ 的这个人分类讨论，得

$$
P_{n+1,\ k}=P_{n,\ k-1}\cdot p^{n+1-k}+P_{n,\ k}\cdot q^k.
$$

两式相减并移项等处理，得

$$
P_{n,\ k}=\frac{P_{n,\ k-1}\cdot(p^{n+1-k}-q^{n+1-k})}{p^k-q^k}.
$$

又边界 $P_{n,\ 0}=1$，故可以递推得到答案。

时间复杂度 $\Theta(n)$。

注意到当 $p=q=\dfrac 12$ 时，**上式无意义，需要特殊处理**。

此时胜败概率与编号无关，故可以任意选择胜者组，又这样选择成立的概率为 $\dfrac 1{k(n-k)}$，得答案为

$$
\dfrac{\dbinom nk}{k(n-k)}.
$$

时间复杂度 $\Theta(n\log n)$。
